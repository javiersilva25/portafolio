<ion-header>
  <ion-toolbar>
    <ion-title>Registro Nutricional Diario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

<ion-card class="fecha-selector-card">
  <ion-card-header>
    <ion-card-title>Seleccionar Fecha</ion-card-title>
  </ion-card-header>
  <ion-card-content class="fecha-selector">
    <ion-button fill="clear" (click)="cambiarFecha(-1)">
      <ion-icon name="chevron-back-outline"></ion-icon>
    </ion-button>

    <span class="fecha-texto">{{ fechaHoy | date:'shortDate' }}</span>

    <ion-button fill="clear" (click)="cambiarFecha(1)">
      <ion-icon name="chevron-forward-outline"></ion-icon>
    </ion-button>
  </ion-card-content>
</ion-card>



<ion-card class="resumen-total-card">
  <ion-card-header>
    <ion-card-title>Resumen Nutricional del Día</ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <ion-grid>
      <ion-row>
        <ion-col size="12" class="calorias-total">
          <strong>Calorías:</strong> {{ totalCalorias | number:'1.0-0' }} kcal
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">
          <strong>C:</strong> {{ totalCarbohidratos | number:'1.0-1' }} g
        </ion-col>
        <ion-col size="4">
          <strong>P:</strong> {{ totalProteinas | number:'1.0-1' }} g
        </ion-col>
        <ion-col size="4">
          <strong>G:</strong> {{ totalGrasas | number:'1.0-1' }} g
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-content>
</ion-card>


  <div *ngFor="let tipo of tiposComida">
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ tipo | titlecase }}</ion-card-title>
      </ion-card-header>

      <ng-container *ngIf="comidas[tipo] && comidas[tipo].length > 0; else sinAlimentos">
        <ion-list>
          <ion-item-sliding *ngFor="let alimento of comidas[tipo]; let i = index">
            <ion-item>
              <ion-label>
                <h3>{{ alimento.nombre }} - {{ alimento.gramos }}g</h3>
                <p>
                  {{ alimento.calorias | number:'1.0-0' }} kcal |
                  C: {{ alimento.carbohidratos | number:'1.0-1' }}g |
                  P: {{ alimento.proteinas | number:'1.0-1' }}g |
                  G: {{ alimento.grasas | number:'1.0-1' }}g
                </p>
              </ion-label>
            </ion-item>
              <ion-item-option color="primary" (click)="editarAlimento(tipo, i)">
                <ion-icon name="create-outline"></ion-icon>
              </ion-item-option>
              <ion-item-option color="danger" (click)="eliminarAlimento(tipo, i)">
                <ion-icon name="trash-outline"></ion-icon>
              </ion-item-option>           
          </ion-item-sliding>
        </ion-list>
      </ng-container>

      <ng-template #sinAlimentos>
        <ion-item>
          <ion-label>No hay alimentos añadidos.</ion-label>
        </ion-item>
      </ng-template>

      <ion-button expand="block" (click)="abrirModal(tipo)">
        + Agregar alimento
      </ion-button>
    </ion-card>
  </div>

</ion-content>
